name: "python-execution"
mode: ONCE
time_limit: 30
max_cpus: 1

# Minimal Cloud Run compatible configuration
clone_newnet: false
clone_newuser: false
clone_newns: false
clone_newpid: false
clone_newipc: false
clone_newuts: false
clone_newcgroup: false
clone_newtime: false

# Disable problematic operations
keep_caps: false
disable_no_new_privs: false

# Disable seccomp for now (can be re-enabled later)
# seccomp_string: "SCMP_ALLOW(SCMP_SYS(read)),SCMP_ALLOW(SCMP_SYS(write)),SCMP_ALLOW(SCMP_SYS(exit)),SCMP_ALLOW(SCMP_SYS(exit_group)),SCMP_ALLOW(SCMP_SYS(rt_sigreturn)),SCMP_ALLOW(SCMP_SYS(open)),SCMP_ALLOW(SCMP_SYS(close)),SCMP_ALLOW(SCMP_SYS(fstat)),SCMP_ALLOW(SCMP_SYS(lstat)),SCMP_ALLOW(SCMP_SYS(lseek)),SCMP_ALLOW(SCMP_SYS(mmap)),SCMP_ALLOW(SCMP_SYS(mprotect)),SCMP_ALLOW(SCMP_SYS(munmap)),SCMP_ALLOW(SCMP_SYS(brk)),SCMP_ALLOW(SCMP_SYS(rt_sigaction)),SCMP_ALLOW(SCMP_SYS(rt_sigprocmask)),SCMP_ALLOW(SCMP_SYS(rt_sigpending)),SCMP_ALLOW(SCMP_SYS(rt_sigtimedwait)),SCMP_ALLOW(SCMP_SYS(rt_sigqueueinfo)),SCMP_ALLOW(SCMP_SYS(rt_sigsuspend)),SCMP_ALLOW(SCMP_SYS(execve)),SCMP_ALLOW(SCMP_SYS(access)),SCMP_ALLOW(SCMP_SYS(pipe)),SCMP_ALLOW(SCMP_SYS(select)),SCMP_ALLOW(SCMP_SYS(sched_yield)),SCMP_ALLOW(SCMP_SYS(madvise)),SCMP_ALLOW(SCMP_SYS(set_tid_address)),SCMP_ALLOW(SCMP_SYS(restart_syscall)),SCMP_ALLOW(SCMP_SYS(nanosleep)),SCMP_ALLOW(SCMP_SYS(setitimer)),SCMP_ALLOW(SCMP_SYS(epoll_create)),SCMP_ALLOW(SCMP_SYS(epoll_ctl)),SCMP_ALLOW(SCMP_SYS(epoll_wait)),SCMP_ALLOW(SCMP_SYS(epoll_pwait)),SCMP_ALLOW(SCMP_SYS(accept)),SCMP_ALLOW(SCMP_SYS(accept4)),SCMP_ALLOW(SCMP_SYS(bind)),SCMP_ALLOW(SCMP_SYS(listen)),SCMP_ALLOW(SCMP_SYS(socketpair)),SCMP_ALLOW(SCMP_SYS(socket)),SCMP_ALLOW(SCMP_SYS(connect)),SCMP_ALLOW(SCMP_SYS(getsockname)),SCMP_ALLOW(SCMP_SYS(getpeername)),SCMP_ALLOW(SCMP_SYS(sendto)),SCMP_ALLOW(SCMP_SYS(recvfrom)),SCMP_ALLOW(SCMP_SYS(setsockopt)),SCMP_ALLOW(SCMP_SYS(getsockopt)),SCMP_ALLOW(SCMP_SYS(shutdown)),SCMP_ALLOW(SCMP_SYS(sendmsg)),SCMP_ALLOW(SCMP_SYS(recvmsg)),SCMP_ALLOW(SCMP_SYS(recvmmsg)),SCMP_ALLOW(SCMP_SYS(sendmmsg)),SCMP_ALLOW(SCMP_SYS(process_vm_readv)),SCMP_ALLOW(SCMP_SYS(process_vm_writev)),SCMP_ALLOW(SCMP_SYS(kcmp)),SCMP_ALLOW(SCMP_SYS(finit_module)),SCMP_ALLOW(SCMP_SYS(sched_setattr)),SCMP_ALLOW(SCMP_SYS(sched_getattr)),SCMP_ALLOW(SCMP_SYS(renameat2)),SCMP_ALLOW(SCMP_SYS(seccomp)),SCMP_ALLOW(SCMP_SYS(getrandom)),SCMP_ALLOW(SCMP_SYS(memfd_create)),SCMP_ALLOW(SCMP_SYS(execveat)),SCMP_ALLOW(SCMP_SYS(userfaultfd)),SCMP_ALLOW(SCMP_SYS(membarrier)),SCMP_ALLOW(SCMP_SYS(mlock2)),SCMP_ALLOW(SCMP_SYS(copy_file_range)),SCMP_ALLOW(SCMP_SYS(preadv2)),SCMP_ALLOW(SCMP_SYS(pwritev2)),SCMP_ALLOW(SCMP_SYS(pkey_mprotect)),SCMP_ALLOW(SCMP_SYS(pkey_alloc)),SCMP_ALLOW(SCMP_SYS(pkey_free)),SCMP_ALLOW(SCMP_SYS(statx)),SCMP_ALLOW(SCMP_SYS(io_pgetevents)),SCMP_ALLOW(SCMP_SYS(rseq)),SCMP_ALLOW(SCMP_SYS(pidfd_send_signal)),SCMP_ALLOW(SCMP_SYS(io_uring_setup)),SCMP_ALLOW(SCMP_SYS(io_uring_enter)),SCMP_ALLOW(SCMP_SYS(io_uring_register)),SCMP_ALLOW(SCMP_SYS(openat2)),SCMP_ALLOW(SCMP_SYS(epoll_pwait2)),SCMP_ALLOW(SCMP_SYS(mount_setattr)),SCMP_ALLOW(SCMP_SYS(quotactl_fd)),SCMP_ALLOW(SCMP_SYS(landlock_create_ruleset)),SCMP_ALLOW(SCMP_SYS(landlock_add_rule)),SCMP_ALLOW(SCMP_SYS(landlock_restrict_self)),SCMP_ALLOW(SCMP_SYS(memfd_secret)),SCMP_ALLOW(SCMP_SYS(process_mrelease)),SCMP_ALLOW(SCMP_SYS(futex_waitv)),SCMP_ALLOW(SCMP_SYS(set_mempolicy_home_node))" 